{
  "version": 3,
  "file": "deco.js",
  "sources": [
    "deco/qvc/constraints/Pattern.js",
    "deco/qvc/constraints/NotEmpty.js",
    "deco/proclaimWhen.js",
    "deco/events.js",
    "deco/ajax.js",
    "deco/spa/PageLoader.js",
    "deco/utils.js",
    "deco/spa/Templates.js",
    "deco/spa/hashNavigation.js",
    "deco/errorHandler.js",
    "deco/spa/applyViewModels.js",
    "deco/spa/whenContext.js",
    "deco/spa/Outlet.js",
    "deco/spa.js",
    "deco/qvc/ConstraintResolver.js",
    "deco/qvc/Constraint.js",
    "deco/qvc/Validator.js",
    "deco/qvc/koExtensions.js",
    "deco/qvc/Validatable.js",
    "deco/qvc/ExecutableResult.js",
    "deco/qvc/Executable.js",
    "deco/qvc.js",
    "deco/deco.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "define(\"deco/qvc/constraints/Pattern\", [], function(){\n  function Pattern(attributes){    \n\n    attributes.flags = attributes.flags || [];\n    \n    var flags = '';\n    if(attributes.flags.indexOf(\"CASE_INSENSITIVE\") >= 0) flags += 'i';\n    \n    this.regex = new RegExp(attributes.regexp, flags);\n  }\n  \n  \n  Pattern.prototype.isValid = function(value){\n    \n    if(value == null) return false;\n    \n    var result = this.regex.exec(value);\n    \n    if(result == null) return false;\n    \n    return result[0] == value;\n  };\n  \n  \n  return Pattern;\n});",
    "define(\"deco/qvc/constraints/NotEmpty\", [], function(){\n  function NotEmpty(attributes){\n    \n  }\n  \n  NotEmpty.prototype.isValid = function(value){\n    if(value == null) return false;\n    if(typeof value == \"string\" && value.length == 0) return false;\n    return true;\n  };\n  \n  return NotEmpty;\n});",
    "define(\"deco/proclaimWhen\", [], function () {\n\n  function publish(name, subscribers, data) {\n    subscribers.forEach(function (item) {\n      item.apply(item, data);\n    });\n  }\n\n  function subscribeTo(name, subscribers, subscriber) {\n    var index = subscribers.indexOf(subscriber);\n    if(index < 0)\n      subscribers.push(subscriber);\n    return index < 0;\n  }\n  \n  function unsubscribeFrom(name, subscribers, subscriber){\n    var index = subscribers.indexOf(subscriber);\n    if(index >= 0)\n      subscribers.splice(index, 1);\n    return index >= 0;\n  }\n  function extendEvent(name, event){\n    event.subscribers = [];\n    event.subscribeSubscribers = [];\n    event.unsubscribeSubscribers = [];\n\n    var extendedEvent = function(){\n      if(arguments.length == 1 && typeof arguments[0] === \"function\"){\n        if(subscribeTo(name, event.subscribers, arguments[0]))\n          publish(name+\".isSubscribedTo\", event.subscribeSubscribers);\n      }else{\n        publish(name, event.subscribers, arguments);\n      }\n    }\n\n    extendedEvent.dont = function(subscriber){\n      if(unsubscribeFrom(name, event.subscribers, subscriber))\n        publish(name+\".isUnsubscribedFrom\", event.unsubscribeSubscribers);\n    };\n\n    extendedEvent.isSubscribedTo = function(subscriber){\n      subscribeTo(name+\".isSubscribedTo\", event.subscribeSubscribers, subscriber);\n    };\n\n    extendedEvent.isSubscribedTo.dont = function(subscriber){\n      unsubscribeFrom(name+\".isSubscribedTo\", event.subscribeSubscribers, subscriber);\n    };\n\n    extendedEvent.isUnsubscribedFrom = function(subscriber){\n      subscribeTo(name+\".isUnsubscribedFrom\", event.unsubscribeSubscribers, subscriber);\n    };\n\n    extendedEvent.isUnsubscribedFrom.dont = function(subscriber){\n      unsubscribeFrom(name+\".isUnsubscribedFrom\", event.unsubscribeSubscribers, subscriber);\n    };\n\n    extendedEvent.toString = function(){\n      return \"[Event \"+name+\"]\";\n    }\n\n    return extendedEvent;\n  }\n  \n  function extend(events){\n    for(var i in events){\n      events[i] = extendEvent(i, events[i]);\n    }\n    return events;\n  }\n\n  function create(arg1, arg2){\n    if(arg2)\n      return extendEvent(arg1, arg2);\n    else\n      return extendEvent(\"anonymous event\", arg1)\n  }\n\n  return {\n    extend: extend,\n    create: create\n  };\n  \n});",
    "define(\"deco/events\", ['deco/proclaimWhen'], function(proclaimWhen){\n  return proclaimWhen.extend({\n    thePageHasChanged: function(path, segments, url){ }\n  });\n});",
    "define(\"deco/ajax\", [], function(){\n  function dataToParams(data){\n    var params = []\n    for(var key in data){\n      var value = data[key];\n      params.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\n    }\n    return params.join(\"&\");\n  }\n\n  function addParamToUrl(url, name, value){\n    return url + (url.match(/\\?/) ? (url.match(/&$/) ? \"\" : \"&\") : \"?\") + encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n  }\n\n  function addParamsToUrl(url, data){\n    var params = dataToParams(data);\n    return url + (url.match(/\\?/) ? (url.match(/&$/) ? \"\" : (params.length > 0 ? \"&\" : \"\")) : \"?\") + params;\n  }\n\n  function addToPath(url, segment){\n    return url + (url.match(/\\/$/) ? \"\" : \"/\") + segment;\n  }\n\n  function cacheBust(url){\n    return addParamToUrl(url, \"cacheKey\", Math.floor(Math.random()*Math.pow(2,53)));\n  }\n\n  function ajax(url, object, method, callback){\n    var xhr = new XMLHttpRequest();\n    \n    var isPost = (method === \"POST\");\n    var data = null;\n    \n    if(object){\n\n      if(isPost){\n        data = dataToParams(object);\n      } else {\n        url = addParamsToUrl(url, object);\n      }\n    }\n    \n    if(isPost){\n      url = cacheBust(url);\n    }\n\n    xhr.open(method, url, true);\n    \n    if(isPost && data){\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    }\n    \n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    \n    xhr.onreadystatechange = function(){\n      if(xhr.readyState == 4){\n        callback(xhr);\n      }\n    }\n    \n    xhr.send(data);\n    return xhr;\n  }\n\n  ajax.addParamToUrl = addParamToUrl;\n  ajax.addParamsToUrl = addParamsToUrl;\n  ajax.addToPath = addToPath;\n  ajax.cacheBust = cacheBust;\n\n\n  return ajax;\n});",
    "define(\"deco/spa/PageLoader\", [\n  \"deco/ajax\"\n], function(\n  ajax\n){\n\n  function PageLoader(config){\n    this.pathToUrl = config && config.pathToUrl || function(a){ return a; };\n    this.cache = (config && 'cachePages' in config ? config.cachePages : true);\n    this.currentXHR = null;\n  }\n\n  PageLoader.prototype.loadPage = function(path, resolver){\n\n    this.abort();\n\n    var url = this.pathToUrl(path);\n\n    if(this.cache === false)\n      url = ajax.cacheBust(url);\n\n    this.currentXHR = ajax(url, {}, \"GET\", function(xhr){\n      if(xhr.status === 200)\n        resolver.resolve(xhr.responseText);\n      else\n        resolver.reject({error: xhr.status, content: xhr.responseText});\n    });\n  };\n\n  PageLoader.prototype.abort = function(){\n    if(this.currentXHR && this.currentXHR.readyState !== 4){\n      this.currentXHR.abort();\n    }\n  };\n\n  return PageLoader;\n});",
    "define(\"deco/utils\", [], function(){\n  return {\n    toArray: function(obj){\n      var array = [];\n      // iterate backwards ensuring that length is an UInt32\n      for (var i = obj.length >>> 0; i--;) { \n        array[i] = obj[i];\n      }\n      return array;\n    },\n    extend: function(dst, src){\n      src = src || {};\n      dst = dst || {};\n      for(var i in src){\n        dst[i] = src[i];\n      }\n      return dst;\n    },\n    arrayToObject: function(array, func){\n      return array.reduce(function(collection, item){\n        func(item, collection);\n        return collection;\n      }, {});\n    },\n    trim: function(word, character){\n      while(word.charAt(0) == character) word = word.substr(1);\n      while(word.charAt(word.length - 1) == character) word = word.substr(0, word.length - 1);\n      return word;\n    },\n    after: function(word, character){\n      var index = word.indexOf(character);\n      if(index < 0){\n        return \"\";\n      }else{\n        return word.substr(index+1);\n      }\n    },\n    popTail: function(array){\n      return array.slice(0, -1);\n    },\n    startsWith: function(word, character){\n      return word.charAt(0) === character;\n    },\n    endsWith: function(word, character){\n      return word.charAt(word.length - 1) === character;\n    },\n    addEventListener: function(element, event, listener, bubble){\n      if('addEventListener' in element){\n        element.addEventListener(event, listener, bubble);\n      }else{\n        element.attachEvent(\"on\"+event, listener);    \n      }\n    }\n  };\n});",
    "define(\"deco/spa/Templates\", [\n  \"deco/spa/PageLoader\",\n  \"deco/utils\",\n  \"when\"\n], function(\n  PageLoader,\n  utils,\n  when\n){\n\n  function defaultConfig(){\n    return {\n      pathToUrl: function(a){ return a; }\n    }\n  }\n\n  function findTemplatesInDocument(doc){\n\n    var nodeList = doc.querySelectorAll(\"[type='text/page-template']\");\n    var nodes = utils.toArray(nodeList);\n    var templateList = nodes.map(function(template){\n      return {\n        id: template.id.toLowerCase(),\n        content: template.innerHTML\n      };\n    });\n\n    return utils.arrayToObject(templateList, function(item, object){\n      object[item.id] = item.content;\n    });\n  }\n\n\n  function Templates(document, config){\n    this.pageLoader = new PageLoader(config || defaultConfig());\n    this.cachePages = (config && 'cachePages' in config ? config.cachePages : true)\n    this.templates = findTemplatesInDocument(document);\n  }\n\n  Templates.prototype.getTemplate = function(path){\n\n    this.pageLoader.abort();\n\n    var normalizedPath = path.toLowerCase();\n\n    if(normalizedPath in this.templates){\n      return when.resolve(this.templates[normalizedPath]);\n    }else{\n      var deferred = when.defer();\n\n      this.pageLoader.loadPage(path, deferred.resolver);\n      \n      return deferred.promise.then(function(content){\n        if(this.cachePages)\n          this.templates[normalizedPath] = content;\n        \n        return content;\n      }.bind(this), function(notFound){\n        var errorTemplate = \"error\" + notFound.error;\n        if(errorTemplate in this.templates){\n          return this.templates[errorTemplate];\n        }else{\n          return notFound.content;\n        }\n      }.bind(this));\n    }\n  };\n\n  return Templates;\n});",
    "define(\"deco/spa/hashNavigation\", [\n  \"deco/utils\"\n], function(\n  _\n){\n\n\n  \n  function newPath(currentPath, link, index){\n    var isRelative = _.startsWith(link, '/') === false;\n    var isFolder = _.endsWith(link, '/');\n    \n    if(link === \"/\"){\n      var path = [];\n    }else if(link === \"\"){\n      var path = [index];\n    }else{\n      var path = _.trim(link, \"/\").split(\"/\");\n    }\n\n    if(isFolder){\n      path.push(index);\n    }\n    if(isRelative){\n      path = _.popTail(currentPath).concat(path);\n    }\n\n    var out = [];\n\n    for(var i = path.length>>>0; i--;){\n      if(path[i] === \"\"){\n        continue;\n      }else if(path[i] === \".\"){\n        continue;\n      }else if(path[i] === \"..\") {\n        i--;\n      }else{\n        out.unshift(path[i]);\n      }\n    }\n\n    return out;\n  }\n\n  function hashChanged(config, onPageChanged, document){\n\n    var path = _.after(document.location.href, '#');\n\n    var isRelative = _.startsWith(path, '/') == false;\n    var isFolder = _.endsWith(path, '/');\n\n    if(isRelative || isFolder){\n      var newHash = newPath(this.currentPath, path, config.index).join('/');\n      document.location.replace(\"#/\" + newHash);\n    }else{\n      this.currentPath = newPath(this.currentPath, path, config.index);\n      onPageChanged(this.currentPath.join('/'), this.currentPath.map(function(p){return decodeURIComponent(p);}));\n    }\n\n  }\n  \n  function startHashNavigation(config, onPageChanged, doc, global){\n    doc = doc || document;\n    global = global || window;\n\n    var state = {\n      currentPath: []\n    };\n    var onHashChanged = hashChanged.bind(state, config, onPageChanged, doc);\n    onHashChanged();\n    _.addEventListener(global, \"hashchange\", onHashChanged, false);\n\n    return {\n      stop: function(){\n        global.removeEventListener(\"hashchange\", onHashChanged, false);\n      }\n    };\n  }\n\n\n  return {\n    start: startHashNavigation\n  };\n\n});",
    "define(\"deco/errorHandler\", [], function(){\n  return {\n    onError: function(error){\n      setTimeout(function(){\n        throw error;\n      },1);\n    }\n  };\n});",
    "define(\"deco/spa/applyViewModels\", [\n  \"deco/utils\",\n  \"deco/errorHandler\",\n  \"knockout\", \n  \"when\", \n  \"when/callbacks\"\n], function (\n  utils, \n  errorHandler,\n  ko, \n  when, \n  callbacks\n) {\n\n\n  function getAttributes(target){\n\n    var viewModelName = target.getAttribute(\"data-viewmodel\");\n    var model = target.getAttribute(\"data-model\");\n    if (model && model.indexOf(\"{\") == 0) {\n      model = JSON.parse(model);\n    }\n\n    return {\n      target: target,\n      viewModelName: viewModelName,\n      model: model\n    };\n  }\n\n\n  function loadViewModel(data){\n\n    return callbacks.call(require, [\n      data.viewModelName\n    ]).then(function(ViewModel){\n      data.ViewModel = ViewModel;\n      return data;\n    }, function(error){\n      errorHandler.onError(new Error(\"Could not load the following modules:\\n\"+error.requireModules.join(\"\\n\")));\n      return null;\n    });\n  }\n\n  function applyViewModel(subscribe, data) {\n    try{\n      var viewModel = new data.ViewModel(data.model || {}, subscribe);\n      ko.applyBindings(viewModel, data.target);\n    }catch(e){\n      errorHandler.onError(e);\n    }\n  }\n\n  function viewModelLoadedSuccessfully(data){\n    return data != null && data.ViewModel != null;\n  }\n\n  return function (domElement, subscribe) {\n\n    domElement = domElement || document.body;\n\n    var elementList = utils.toArray(domElement.querySelectorAll(\"*[data-viewmodel]\"));\n\n    var viewModelsLoaded = elementList.map(getAttributes).map(loadViewModel);\n\n    return when.all(viewModelsLoaded).then(function(list){\n      list.filter(viewModelLoadedSuccessfully).forEach(applyViewModel.bind(null, subscribe))\n    });\n  };\n});",
    "define(\"deco/spa/whenContext\", [\n  \n], function(\n  \n){\n\n  function unsubscribe(event, reaction){\n    event.dont(reaction);\n  }\n\n  function subscribe(event, reaction){\n    event(reaction);\n    return event.dont.bind(null, reaction);\n  }\n\n  function whenSomething(){\n    if(this.destroyed) throw new Error(\"This context has been destroyed!\");\n\n    if(arguments.length == 0){\n      var childContext = createContext();\n      this.childContexts.push(childContext);\n      return childContext.when;\n    }else if(arguments.length == 1 && typeof arguments[0] === \"function\"){\n      return {\n        dont: unsubscribe.bind(null, arguments[0])\n      }\n    }else if(arguments.length == 2 && typeof arguments[1] === \"function\"){\n      this.eventSubscribers.push(subscribe(arguments[0], arguments[1]));\n    }\n  }\n\n  function thisIsDestroyed(reaction){\n    this.onDestroyListeners.push(reaction);\n  }\n\n  function destroyChildContexts(){\n    var context;\n    while(context = this.childContexts.pop())\n      context.destroyContext();\n  }\n\n  function destroyContext(){\n    var subscriber, listener, context;\n    while(subscriber = this.eventSubscribers.pop())\n      subscriber();\n    while(listener = this.onDestroyListeners.pop())\n      listener();\n    while(context = this.childContexts.pop())\n      context.destroyContext();\n    this.destroyed = true;\n  }\n\n  function createContext(){\n    var context = {\n      destroyed: false,\n      onDestroyListeners: [],\n      childContexts: [],\n      eventSubscribers: []\n    };\n\n    var when = whenSomething.bind(context);\n\n    when.thisIsDestroyed = thisIsDestroyed.bind(context);\n\n    when.destroyChildContexts = destroyChildContexts.bind(context);\n\n    return {\n      when: when,\n      destroyContext: destroyContext.bind(context)\n    };\n  }\n\n  return createContext().when;\n});",
    "define(\"deco/spa/Outlet\", [\n  \"knockout\"\n], function(\n  ko\n){\n\n  function Outlet(element, document){\n    this.element = element;\n    this.document = document || window.document;\n  }\n\n  Outlet.prototype.outletExists = function(){\n    return this.element != null;\n  };\n\n  Outlet.prototype.unloadCurrentPage = function(){\n    ko.cleanNode(this.element);\n    this.element.innerHTML = \"\";\n  };\n\n  Outlet.prototype.setPageContent = function(content){\n    this.element.innerHTML = content;\n  };\n\n  Outlet.prototype.getPageTitle = function(){\n    var titleMetaTag = this.element.querySelector(\"meta[name=title]\");\n    return (titleMetaTag && titleMetaTag.getAttribute(\"content\"));\n  };\n\n  Outlet.prototype.setDocumentTitle = function(title){\n    this.document.title = title;\n  };\n\n  Outlet.prototype.extractAndRunPageJavaScript = function(){\n    var scripts = this.element.querySelectorAll(\"script[type='text/javascript']\");\n    for(var i=0; i<scripts.length; i++){\n      scripts[i].parentNode.removeChild(scripts[i]);\n      if(scripts[i].id === '') throw new Error(\"The script must have an id\");\n      if(this.document.getElementById(scripts[i].id) == null){\n        var script = this.document.createElement(\"script\");\n        script.id = scripts[i].id;\n        script.text = scripts[i].textContent;\n        script.setAttribute('type', scripts[i].getAttribute('type'));\n        this.document.body.appendChild(script);\n      }\n    }\n  };\n\n  Outlet.prototype.indicatePageIsLoading = function(){\n    this.element.setAttribute(\"data-loading\", \"true\");\n  };\n\n  Outlet.prototype.pageHasLoaded = function(){\n    this.element.setAttribute(\"data-loading\", \"false\");\n  };\n\n  return Outlet;\n\n});",
    "define(\"deco/spa\", [\n  \"deco/spa/Outlet\",\n  \"deco/spa/whenContext\",\n  \"deco/spa/applyViewModels\",\n  \"deco/spa/hashNavigation\",\n  \"deco/spa/Templates\",\n  \"deco/utils\",\n  \"deco/events\"\n], function(\n  Outlet,\n  whenContext,\n  applyViewModels,\n  hashNavigation,\n  Templates,\n  utils,\n  proclaim\n){\n\n  var _config = {\n      index: \"index\"\n    },\n    _document,\n    _outlet,\n    _originalTitle,\n    _templates,\n    _whenContext;\n\n  function applyContent(content){\n    _outlet.unloadCurrentPage();\n    _outlet.setPageContent(content);\n    _outlet.setDocumentTitle(_outlet.getPageTitle() || _originalTitle);\n    _outlet.extractAndRunPageJavaScript();\n    return applyViewModels(_outlet.element, _whenContext());\n  }\n\n  function pageChanged(path, segments){\n    _outlet.indicatePageIsLoading();\n    _whenContext.destroyChildContexts();\n    return _templates.getTemplate(path)\n      .then(applyContent)\n      .then(function(){\n        _outlet.pageHasLoaded();\n        proclaim.thePageHasChanged(path, segments, document.location)\n      });\n  }\n\n  function start(config, document){\n    _document = document || window.document;\n    _config = utils.extend(_config, config);\n    _outlet = new Outlet(_document.querySelector(\"[data-outlet]\"), _document);\n    _originalTitle = _document.title;\n    _whenContext = whenContext();\n\n    return applyViewModels(_document, whenContext()).then(function(){\n      if(_outlet.outletExists()){\n        _templates = new Templates(_document, _config);\n        hashNavigation.start(_config, pageChanged, _document);\n      }\n    });\n  }\n\n  return {\n    start: start\n  };\n});",
    "define(\"deco/qvc/ConstraintResolver\", [], function(){\n\n  var STATE_LOADING = 'loading';\n  var STATE_LOADED = 'loaded';\n\n  function findConstraint(name, constraints) {\n    for (var i = 0; i < constraints.length; i++) {\n      if (constraints[i].name == name) {\n        return constraints[i];\n      }\n    }\n    return false;\n  }\n\n  function constraintsLoaded(name, fields){\n    var constraint = findConstraint(name, this.constraints);\n    if(constraint){\n      constraint.validatables.forEach(function(validatable){\n        validatable.applyConstraints(fields);\n      });\n      constraint.fields = fields;\n      constraint.state = STATE_LOADED;\n      constraint.validatables = [];\n    }\n  }\n\n\n  function ConstraintResolver(qvc){\n    this.qvc = qvc;\n    this.constraints = [];\n  }\n  \n  ConstraintResolver.prototype.applyValidationConstraints = function(name, validatable){\n    var constraint = findConstraint(name, this.constraints);\n    if(constraint === false){\n      this.constraints.push({\n        name: name,\n        state: STATE_LOADING,\n        validatables: [validatable]\n      });\n      this.qvc.loadConstraints(name, constraintsLoaded.bind(this));\n    }else{\n      if(constraint.state === STATE_LOADING){\n        constraint.validatables.push(validatable);\n      }else{\n        validatable.applyConstraints(constraint.fields);\n      }\n    }\n  };\n  \n  return ConstraintResolver;\n});",
    "define(\"deco/qvc/Constraint\", [], function(){\n  \n  function Constraint(type, attributes){    \n    this.type = type;\n    this.attributes = attributes;\n    this.message = attributes.message;\n    \n    \n    this.init(type);\n  }\n    \n  Constraint.prototype.init = function(type){\n    require([\"deco/qvc/constraints/\" + type], function(Tester){\n      var tester = new Tester(this.attributes);\n      this.validate = tester.isValid.bind(tester);\n    }.bind(this));\n  };\n  \n  Constraint.prototype.validate = function(value){\n    return true;//real test not loaded yet\n  };\n  \n  \n  return Constraint;\n});",
    "define(\"deco/qvc/Validator\", [\n  \"deco/qvc/Constraint\", \n  \"knockout\"\n], function(\n  Constraint, \n  ko\n){\n\n  function interpolate(message, attributes, value, name, path){\n    return message.replace(/\\{([^}]+)\\}/g, function(match, key){\n      if(key == \"value\") return value;\n      if(key == \"this.name\") return name;\n      if(key == \"this.path\") return path;\n      if(key in attributes) return attributes[key];\n      return match;\n    });\n  }\n  \n\n  function Validator(target, options){\n    var self = this;\n    \n    this.constraints = [];\n    \n    this.isValid = ko.observable(true);\n    this.message = ko.observable(\"\");\n\n    this.name = options && options.name;\n    this.path = options && options.path;\n  }\n  \n  Validator.prototype.setConstraints = function(constraints){\n    this.constraints = constraints.map(function(constraint){\n      return new Constraint(constraint.name, constraint.attributes);\n    });\n  };\n  \n  Validator.prototype.reset = function(){\n    this.isValid(true);\n    this.message(\"\");\n  };\n  \n  Validator.prototype.validate = function(value){\n    if(this.constraints.length == 0){\n      this.reset();\n    }else if(this.constraints.every(function (constraint) {\n      if(constraint.validate(value)){\n        return true;\n      }else{\n        this.isValid(false);\n        this.message(interpolate(constraint.message, constraint.attributes, value, this.name, this.path));\n        return false;\n      }\n    }.bind(this))){\n      this.isValid(true);\n      this.message(\"\");\n    }\n  };\n  \n  return Validator;\n});",
    "define(\"deco/qvc/koExtensions\", [\"deco/qvc/Validator\", \"knockout\"], function(Validator, ko){\n\n  if (ko != null) {\n    ko.bindingHandlers.validationMessageFor = {\n      init: function (element, valueAccessor, allBindingsAccessor, viewModel) {\n        var value = valueAccessor();\n        var validator = value.validator;\n        if (validator) {\n          ko.applyBindingsToNode(element, { hidden: validator.isValid, text: validator.message }, validator);\n        }else{\n          var attributes = Array.prototype.reduce.call(element.attributes, function(s,e){return s+\" \"+e.localName+\"=\\\"\"+e.value+\"\\\"\"}, \"\");\n          throw new Error(\"Could not bind `validationMessageFor` to value on element <\"+element.tagName.toLowerCase() + attributes +\">\");\n        }\n      }\n    };\n    \n    ko.extenders.validation = function (target, options) {\n      target.validator = new Validator(target, options);\n      target.subscribe(function (newValue) {\n        target.validator.validate(newValue);\n      });\n      return target;\n    };\n    \n    ko.bindingHandlers.command = ko.bindingHandlers.query = {\n      init: function (element, valueAccessor, allBindingAccessor, viewModel) {\n        ko.applyBindingsToNode(element, { click: valueAccessor() }, viewModel);\n      }\n    };\n  }\n  \n\n});",
    "define(\"deco/qvc/Validatable\", [\"deco/utils\", \"deco/qvc/Validator\", \"knockout\", \"deco/qvc/koExtensions\"], function(utils, Validator, ko){\n  \n  function recursivlyExtendParameters(parameters, validatableFields, parents) {\n    for (var key in parameters) {\n      var property = parameters[key];\n      var path = parents.concat([key]);\n      if (ko.isObservable(property)) {\n        property.extend({\n          validation: {\n            name:key,\n            path:path.join(\".\")\n          }\n        });\n        validatableFields.push(property);\n      }\n      property = ko.utils.unwrapObservable(property);\n      if (typeof property === \"object\") {\n        recursivlyExtendParameters(property, validatableFields, path);\n      }\n    }\n  }\n\n\n  function findField(fieldPath, parameters, errorMessage){\n    return fieldPath.split(\".\").reduce(function(object, name){\n      var path = object.path;\n      var field = ko.utils.unwrapObservable(object.field);\n      if (name in field) {\n        return {\n          field: field[name],\n          path: path + \".\" + name\n        };\n      } else {\n        throw new Error(errorMessage + \": \" + fieldPath + \"\\n\" +\n          name + \" is not a member of \" + path + \"\\n\" +\n          path + \" = `\" + ko.toJSON(field) + \"`\");\n      }\n    }, {\n      field: parameters,\n      path: \"parameters\"\n    }).field;\n  }\n\n\n\n  \n  function applyViolationMessageToField(parameters, fieldPath, message) {\n    var object = findField(fieldPath, parameters, \"Error applying violation\");\n    \n    if (typeof message === \"string\" && \"validator\" in object) {\n      object.validator.isValid(false);\n      object.validator.message(message);\n    }else{\n      throw new Error(\"Error applying violation\\n\"+fieldPath+\" is not validatable\\nit should be an observable\");\n    }\n  };\n\n  function applyViolationMessageToValidatable(validatable, message) {\n    validatable.validator.isValid(false);\n    var oldMessage = validatable.validator.message();\n    var newMessage = oldMessage.length == 0 ? message : oldMessage + \", \" + message;\n    validatable.validator.message(newMessage);\n  };\n\n\n\n  function Validatable(name, parameters, constraintResolver){\n    var self = this;\n    \n    this.validator = new Validator();\n    this.validatableFields = [];\n    this.validatableParameters = parameters;\n    \n    \n    init: {\n      recursivlyExtendParameters(self.validatableParameters, self.validatableFields, []);\n      if(constraintResolver)\n        constraintResolver.applyValidationConstraints(name, self);\n    }\n  }\n  \n  Validatable.prototype.isValid = function () {\n    return this.validatableFields.every(function(constraint){\n      return constraint.validator && constraint.validator.isValid();\n    }) && this.validator.isValid();\n  };\n    \n  Validatable.prototype.applyViolations = function(violations){\n    violations.forEach(function(violation){\n      var message = violation.message;\n      var fieldName = violation.fieldName;\n      if (fieldName.length > 0) {\n        //one of the fields violates a constraint\n        applyViolationMessageToField(this.validatableParameters, fieldName, message);\n      } else {\n        //the validatable violates a constraint\n        applyViolationMessageToValidatable(this, message);\n      }\n    }.bind(this));\n  };\n  \n  Validatable.prototype.applyConstraints = function(fields){\n    var parameters = this.validatableParameters;\n    \n    fields.forEach(function(field){\n      var fieldName = field.name;\n      var constraints = field.constraints;\n\n      if(constraints == null || constraints.length == 0)\n        return;\n      \n      var object = findField(fieldName, parameters, \"Error applying constraints to field\");\n      \n      if (ko.isObservable(object) && \"validator\" in object) {\n        object.validator.setConstraints(constraints);\n      } else {\n        throw new Error(\"Error applying constraints to field: \" + fieldName + \"\\n\" +\n          \"It is not an observable or is not extended with a validator. \\n\" +\n          fieldName + \"=`\" + ko.toJSON(object) + \"`\");\n      }\n    });\n  };\n  \n  Validatable.prototype.validate = function(){\n    this.validator.validate(true);\n    if (this.validator.isValid()) {\n      this.validatableFields.forEach(function(constraint){\n        var validator = constraint.validator;\n        if (validator) {\n          validator.validate(constraint());\n        }\n      });\n    }\n  };\n  \n  Validatable.prototype.clearValidationMessages = function () {\n    this.validator.reset();\n    this.validatableFields.forEach(function(constraint){\n      var validator = constraint.validator;\n      if (validator) {\n        validator.reset();\n      }\n    });\n  };\n  \n  \n  \n  return Validatable;\n});",
    "define(\"deco/qvc/ExecutableResult\", [\"deco/utils\"], function(utils){\n  function ExecutableResult(result){\n    \n    this.success = false;\n    this.valid = false;\n    this.result = null;\n    this.exception = null;\n    this.violations = [];\n  \n    utils.extend(this, result);\n  \n  };\n  \n  return ExecutableResult;\n});",
    "define(\"deco/qvc/Executable\", [\"deco/qvc/ExecutableResult\", \"deco/qvc/Validatable\", \"deco/utils\", \"knockout\"], function(ExecutableResult, Validatable, utils, ko){\n\n  function Executable(name, type, parameters, callbacks, qvc){\n    var self = this;\n    \n    this.name;\n    this.type;\n    this.isBusy = ko.observable(false);\n    this.hasError = ko.observable(false);\n    this.result = new ExecutableResult();\n    \n    this.parameters = {};\n    this.callbacks = {\n      beforeExecute: function () {},\n      canExecute: function(){return true;},\n      error: function () {},\n      success: function () {},\n      result: function(){},\n      complete: function () {}\n    };\n    \n    \n    this.execute = function () {\n      if (self.onBeforeExecute() === false) {\n        return;\n      }\n      qvc.execute(self);\n    };\n\n    this.onBeforeExecute = function () {\n      \n      if (self.isBusy()) {\n        return false;\n      }\n      \n      self.hasError(false);\n      \n      self.callbacks.beforeExecute();\n      \n      self.validate();\n      if (!self.isValid()) {\n        return false;\n      }\n      \n      if (self.callbacks.canExecute() === false) {\n        return false;\n      }\n      self.isBusy(true);\n      \n      return true;\n    };\n    \n    \n    this.onError = function () {\n      self.hasError(true);\n      if(\"violations\" in self.result && self.result.violations != null)\n        self.applyViolations(self.result.violations);\n      self.callbacks.error(self.result);\n    };\n\n    this.onSuccess = function () {\n      self.hasError(false);\n      self.clearValidationMessages();\n      self.callbacks.success(self.result);\n      self.callbacks.result(self.result.result);\n    };\n\n    this.onComplete = function () {\n      if (!self.hasError()) {\n        self.callbacks.complete(self.result);\n        self.clearValidationMessages();\n      }\n      self.isBusy(false);\n    };\n    \n    \n    init: {\n      self.name = name;\n      self.type = type;\n      utils.extend(self.parameters, parameters);\n      utils.extend(self.callbacks, callbacks);\n      utils.extend(self, new Validatable(self.name, self.parameters, qvc.constraintResolver));\n    }\n  }\n  \n  Executable.Command = \"command\";\n  Executable.Query = \"query\";\n  \n  return Executable;\n});",
    "define(\"deco/qvc\", [\n  \"deco/qvc/Executable\", \n  \"deco/qvc/ExecutableResult\", \n  \"deco/utils\", \n  \"deco/ajax\",\n  \"deco/qvc/ConstraintResolver\",\n  \"deco/errorHandler\",\n  \"knockout\", \n  \"deco/qvc/koExtensions\"], function(\n  Executable,\n  ExecutableResult,\n  utils,\n  ajax,\n  ConstraintResolver,\n  errorHandler,\n  ko){\n\nfunction QVC(){\n\n  var qvc = this;\n\n  this.constraintResolver = new ConstraintResolver(qvc);\n\n  this.execute = function(executable){\n    var parameters = ko.toJS(executable.parameters);\n    var data = {\n      parameters: JSON.stringify(parameters),\n      csrfToken: qvc.config.csrf\n    };\n    var url = ajax.addToPath(qvc.config.baseUrl, executable.type + \"/\" + executable.name);\n    ajax(url, data, \"POST\", function (xhr) {\n      if (xhr.status === 200) {\n        executable.result = new ExecutableResult(JSON.parse(xhr.responseText || \"{}\"));\n        if (executable.result.success === true) {\n          executable.onSuccess();\n        } else {\n          if(executable.result.exception && executable.result.exception.message){\n            errorHandler.onError(executable.result.exception.message);\n          }\n          executable.onError();\n        }\n      } else {\n        executable.result = new ExecutableResult({exception: {message: xhr.responseText, cause: xhr}});\n        errorHandler.onError(executable.result.exception.message);\n        executable.onError();\n      }\n      executable.onComplete();\n    });\n  \n  };\n  \n  this.loadConstraints = function(name, callback){\n    var url = ajax.addToPath(qvc.config.baseUrl, \"constraints/\" + name);\n    ajax(url, null, \"GET\", function(xhr){\n      if (xhr.status === 200) {\n        try{\n          var response = JSON.parse(xhr.responseText || \"{\\\"parameters\\\":[]}\");\n          if(\"parameters\" in response == false){\n            response.parameters = [];\n          }\n          if(response.exception && response.exception.message){\n            errorHandler.onError(response.exception.message);\n          }\n        }catch(e){\n          var response = {parameters: []};\n        }\n        callback(name, response.parameters);\n      }else{\n        errorHandler.onError(xhr.responseText);\n      }\n    });\n  };\n\n  \n  this.config = {\n    baseUrl: \"/\",\n    csrf: \"\"\n  }\n};\n\nvar qvc = new QVC();\n\nfunction createExecutable(name, type, parameters, callbacks){\n  if(name == null || name.length == 0)\n    throw new Error(type + \" is missing name\\nA \" + type + \" must have a name!\\nusage: createCommand('name', [parameters, callbacks])\");\n\n  var executable = new Executable(name, type, parameters || {}, callbacks || {}, qvc);\n  var execute = executable.execute.bind(executable);\n  execute.isValid = ko.computed(function(){return executable.isValid(); });\n  execute.isBusy = ko.computed(function(){return executable.isBusy();});\n  execute.hasError = ko.computed(function(){return executable.hasError();});\n  execute.success = function(callback){\n    executable.callbacks.success = callback;\n    return execute;\n  };\n  execute.error = function(callback){\n    executable.callbacks.error = callback;\n    return execute;\n  };\n  execute.beforeExecute = function(callback){\n    executable.callbacks.beforeExecute = callback;\n    return execute;\n  };\n  execute.canExecute = function(callback){\n    executable.callbacks.canExecute = callback;\n    return execute;\n  };\n  execute.result = function(){\n    if(arguments.length == 1){\n      executable.callbacks.result = arguments[0];\n      return execute;\n    }\n    return executable.result.result;\n  };\n  execute.complete = function(callback){\n    executable.callbacks.complete = callback;\n    return execute;\n  };\n  execute.clearValidationMessages = executable.clearValidationMessages.bind(executable);\n  execute.validator = executable.validator;\n  \n  return execute;\n}\n\nreturn {\n  createCommand: function(name, parameters, callbacks){\n    return createExecutable(name, Executable.Command, parameters, callbacks);\n  },\n  createQuery: function(name, parameters, callbacks){\n    return createExecutable(name, Executable.Query, parameters, callbacks);\n  },\n  config: function(config){\n    utils.extend(qvc.config, config);\n  }\n}\n});",
    "define(\"deco/deco\", [\n  'deco/qvc',\n  'deco/spa'\n], function(\n  qvc,\n  spa\n){\n\n  \n\n  function config(config){\n\n    config = config || {};\n\n    var spaConfig = config.spa || {};\n    var qvcConfig = config.qvc || {};\n\n    qvc.config(qvcConfig);\n\n    return {\n      start: spa.start.bind(null, spaConfig, document)\n    }\n  }\n  \n  return {\n    config: config\n  };\n\n});"
  ]
}